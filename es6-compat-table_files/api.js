/*! grtp.co 2015-05-25 */
!function(a){"use strict";var b=window.grtpAPI||"https://grtp.co/v1/",c=window.gratipayURI||"https://gratipay.com/",d=window._grtp||[];window.Gratipay||(window.Gittip=window.Gratipay={}),Gratipay.users={_get:function(b,d,e,f){f||(f=e,e=d,d=b,b=void 0);var g="";b&&(g="on/"+b+"/");var h=new RegExp("^(/|"+location.protocol+")").test(c)?"json":"jsonp";a[h](c+g+encodeURIComponent(d)+"/"+e+".json",f)},getPublic:function(a,b,c){c||(c=b,b=a,a=void 0),this._get(a,b,"public",c)},getCharts:function(a,b){b||(b=a,a=service,service=void 0),this._get(a,"charts",b)}},Gratipay.widgets={_:a,apply:function(b,d){function e(c,d,e,f,g){var h=b.querySelectorAll(".gittip-"+c+", .gratipay-"+c);a.each(h,function(a){f?a.setAttribute(d,(g?""+a.getAttribute(d):"")+e):a[d]=e})}function f(a,b){e(a,"style",";"+b,!0,!0)}function g(a,b){e(a,"innerHTML",b)}function h(a,c){b.hasAttribute("target")||e(a,"target","_top",!0),e(a,"href",c,!0)}var i=b.getAttribute("data-gratipay-username")||b.getAttribute("data-gittip-username");h("profile-link",c+encodeURIComponent(i)+"/"),h("link",c),g("username",i),g("identity","I"),Gratipay.users.getPublic(i,function(a){b.setAttribute("data-gratipay-readystatus","ready"),g("receiving",a.receiving?"$"+a.receiving:"anonymously"),g("username",a.username),g("my-tip-button","self"==a.my_tip?"You!":+a.my_tip>0?a.my_tip:"Gratipay"),g("goal","$"+a.goal),g("giving",a.giving?"$"+a.giving:"anonymously"),h("profile-link",c+encodeURIComponent(a.username)+"/"),h("link",c),f("goal-progress-bar","width:"+a.receiving/a.goal*100+"%"),"plural"==a.number&&g("identity","We"),"function"==typeof d&&d(a)})},getWidget:function(c,d){a.get(b+"widgets/"+c+".html",function(a){a=a.replace(/url\((['"])?\/\//g,"url($1"+location.protocol+"//");var b=document.createElement("div");b.innerHTML=a,d(b)})},load:function(b){var c=b.getAttribute("data-gratipay-widget")||b.getAttribute("data-gittip-widget")||"default",d=b.getAttribute("data-gratipay-username")||b.getAttribute("data-gittip-username");return b.setAttribute("data-gratipay-readystatus","loading"),-1!=["false","none","user-defined","custom"].indexOf(c.toLowerCase())?Gratipay.widgets.apply(b):void Gratipay.widgets.getWidget(c,function(c){function e(){f.contentDocument.head.appendChild(g),f.contentDocument.body.appendChild(c),f.contentWindow.Gratipay={users:Gratipay.users},function a(){f.style.width=c.clientWidth+"px",f.style.height=c.clientHeight+"px",setTimeout(a,500)}(),Gratipay.widgets.apply(c,function(){b.setAttribute("data-gratipay-readystatus","ready")})}var f=a.jsonml(["iframe",{style:"border:0;margin:0;padding:0;width:0;height:0"}]),g=a.jsoncss([["body",{margin:0,padding:0,overflow:"hidden"}],["body > div",{"float":"left"}]]);f.attachEvent?f.attachEvent("onload",e):f.onload=e,c.setAttribute("data-gratipay-username",d),b.parentNode.insertBefore(f,b)})},init:function(){a.each(d,this.load)}},Gratipay.widgets.init()}({each:function(a,b){"use strict";for(var c=a.length,d=0;c>d;d++)b(a[d],d,c)},jsoncss:function(a){"use strict";var b=this,c="";return b.each(a,function(a){return"string"==typeof a?c+=a:(c+=a.shift()+"{",b.each(a,function(a){var b,d;for(d in a)b=a[d].toString().replace(/url\((['"])?\/\//g,"url($1"+location.protocol+"//"),c+=d+":"+b+";"}),void(c+="}"))}),this.jsonml(["style",c])},jsonml:function(a){"use strict";var b=this,c=document.createElement(a.shift());return b.each(a,function(a){if("undefined"!=typeof a)switch(a.constructor){case Object:for(var d in a)c.setAttribute(d,a[d]);break;case Array:c.appendChild(b.jsonml(a));break;case String:case Number:c.appendChild(document.createTextNode(a));break;default:c.appendChild(a)}}),c},jsonp:function(a,b){"use strict";var c="_req"+Math.floor(1e3*Math.random());window[c]=function(a){b(a),delete window[c]},document.head.appendChild(this.jsonml(["script",{src:a+"?callback="+c}]))},_xhr:function(a){"use strict";var b=new XMLHttpRequest;return void 0===b.withCredentials&&XDomainRequest?this._xdr(a):(b.onreadystatechange=function(){4==b.readyState&&200==b.status&&a()},b)},_xdr:function(a){"use strict";var b=new XDomainRequest;return b.onload=a,b},get:function(a,b){"use strict";var c=this._xhr(function(){b(c.responseText)});c.open("GET",a),c.send()},json:function(a,b){"use strict";this.get(a,function(a){b(JSON.parse(a))})}});